<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Visualization of regression functions — visreg • visreg</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Visualization of regression functions — visreg"><meta name="description" content="A function for visualizing regression models quickly and easily. Default
plots contain a confidence band, prediction line, and partial residuals.
Factors, transformations, conditioning, interactions, and a variety of other
options are supported.  The visreg function performs the calculations
and, if plot=TRUE (the default), these calculations are passed to
plot.visreg for plotting."><meta property="og:description" content="A function for visualizing regression models quickly and easily. Default
plots contain a confidence band, prediction line, and partial residuals.
Factors, transformations, conditioning, interactions, and a variety of other
options are supported.  The visreg function performs the calculations
and, if plot=TRUE (the default), these calculations are passed to
plot.visreg for plotting."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">visreg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.7.0.15</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-basic-framework" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Basic framework</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-basic-framework"><li><a class="dropdown-item" href="../articles/web/basic.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/web/contrast.html">Contrast vs. conditional plots</a></li>
    <li><a class="dropdown-item" href="../articles/web/trans.html">Transformations</a></li>
    <li><a class="dropdown-item" href="../articles/web/cond.html">Conditioning</a></li>
    <li><a class="dropdown-item" href="../articles/web/options.html">Graphical options</a></li>
    <li><a class="dropdown-item" href="../articles/web/gg.html">Visreg and ggplot2</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-models-with-interactions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Models with interactions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-models-with-interactions"><li><a class="dropdown-item" href="../articles/web/cross.html">Cross-sectional plots</a></li>
    <li><a class="dropdown-item" href="../articles/web/overlay.html">Overlay plots</a></li>
    <li><a class="dropdown-item" href="../articles/web/surface.html">Surface plots</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-special-topics" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Special topics</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-special-topics"><li><a class="dropdown-item" href="../articles/web/glm.html">GLMs</a></li>
    <li><a class="dropdown-item" href="../articles/web/blackbox.html">Forests, SVMs, etc.</a></li>
    <li><a class="dropdown-item" href="../articles/web/mixed.html">Mixed models</a></li>
    <li><a class="dropdown-item" href="../articles/web/multi.html">Multiple outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/web/faq.html">FAQ</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/pbreheny/visreg"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Visualization of regression functions</h1>
      <small class="dont-index">Source: <a href="https://github.com/pbreheny/visreg/blob/master/R/visreg.R" class="external-link"><code>R/visreg.R</code></a></small>
      <div class="d-none name"><code>visreg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A function for visualizing regression models quickly and easily. Default
plots contain a confidence band, prediction line, and partial residuals.
Factors, transformations, conditioning, interactions, and a variety of other
options are supported.  The <code>visreg</code> function performs the calculations
and, if <code>plot=TRUE</code> (the default), these calculations are passed to
<code>plot.visreg</code> for plotting.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">visreg</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">xvar</span>,</span>
<span>  <span class="va">by</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"conditional"</span>, <span class="st">"contrast"</span><span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trans <span class="op">=</span> <span class="va">I</span>,</span>
<span>  scale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="st">"response"</span><span class="op">)</span>,</span>
<span>  <span class="va">xtrans</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  nn <span class="op">=</span> <span class="fl">101</span>,</span>
<span>  cond <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  jitter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  collapse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>The fitted model object you wish to visualize.  Any object with
'predict' and 'model.frame' methods are supported, including lm, glm, gam,
rlm, coxph, and many more.</p></dd>


<dt id="arg-xvar">xvar<a class="anchor" aria-label="anchor" href="#arg-xvar"></a></dt>
<dd><p>Character string specifying the variable to be put on the x-axis
of your plot.  Both continuous variables and factors are supported.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>(Optional) A variable allowing you to divide your plot into
cross-sections based on levels of the <code>by</code> variable; particularly
useful for visualizing models with interactions.  Supplied as a character
string.  Uses the lattice package.  Both continuous variables and factors
are supported.</p></dd>


<dt id="arg-breaks">breaks<a class="anchor" aria-label="anchor" href="#arg-breaks"></a></dt>
<dd><p>If a continuous variable is used for the <code>by</code> option, the
<code>breaks</code> argument controls the values at which the cross-sections are
taken. By default, cross-sections are taken at the 10th, 50th, and 90th
quantiles.  If <code>breaks</code> is a single number, it specifies the number of
breaks.  If <code>breaks</code> is a vector of numbers, it specifies the values at
which the cross-sections are to be taken.  Each partial residuals appears
exactly once in the plot, in the panel it is closest to.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The type of plot to be produced.  The following options are
supported:</p><ul><li><p>If 'conditional' is selected, the plot returned
shows the value of the variable on the x-axis and the change in response on
the y-axis, holding all other variables constant (by default, median for
numeric variables and most common category for factors).</p></li>
<li><p>If
'contrast' is selected, the plot returned shows the effect on the expected
value of the response by moving the x variable away from a reference point
on the x-axis (for numeric variables, this is taken to be the mean).</p></li>
</ul><p>For
more details, see references.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The data frame used to fit the model.  Typically, visreg() can
figure out where the data is, so it is not necessary to provide this.  In
some cases, however, the data set cannot be located and must be supplied
explicitly.</p></dd>


<dt id="arg-trans">trans<a class="anchor" aria-label="anchor" href="#arg-trans"></a></dt>
<dd><p>(Optional) A function specifying a transformation for the
vertical axis.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>By default, the model is plotted on the scale of the linear
predictor.  If <code>scale='response'</code> for a glm, the inverse link function
will be applied so that the model is plotted on the scale of the original
response.</p></dd>


<dt id="arg-xtrans">xtrans<a class="anchor" aria-label="anchor" href="#arg-xtrans"></a></dt>
<dd><p>(Optional) A function specifying a transformation for the
horizontal axis.  Note that, for model terms such as <code>log(x)</code>, visreg
automatically plots on the original axis (see examples).</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Alpha level (1-coverage) for the confidence band displayed in
the plot (default: 0.05).</p></dd>


<dt id="arg-nn">nn<a class="anchor" aria-label="anchor" href="#arg-nn"></a></dt>
<dd><p>Controls the smoothness of the line and confidence band.
Increasing this number will add to the computational burden, but produce a
smoother plot (default: 101).</p></dd>


<dt id="arg-cond">cond<a class="anchor" aria-label="anchor" href="#arg-cond"></a></dt>
<dd><p>Named list specifying conditional values of other explanatory
variables. By default, conditional plots in visreg are constructed by
filling in other explanatory variables with the median (for numeric
variables) or most common category (for factors), but this can be overridden
by specifying their values using <code>cond</code> (see examples).</p></dd>


<dt id="arg-jitter">jitter<a class="anchor" aria-label="anchor" href="#arg-jitter"></a></dt>
<dd><p>Adds a small amount of noise to <code>xvar</code>.  Potentially
useful if many observations have exactly the same value.  Default is FALSE.</p></dd>


<dt id="arg-collapse">collapse<a class="anchor" aria-label="anchor" href="#arg-collapse"></a></dt>
<dd><p>If the <code>predict</code> method for <code>fit</code> returns a
matrix, should this be returns as multiple visreg objects bound together as
a list (<code>collapse=FALSE</code>) or collapsed down to a single <code>visreg</code>
object (<code>collapse=TRUE</code>).</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Send the calculations to <code><a href="plot.visreg.html">plot.visreg</a></code>?  Default is
TRUE.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Graphical parameters (e.g., <code>ylab</code>) can be passed to the
function to customize the plots.  If <code>by=TRUE</code>, lattice parameters can
be passed, such as layout (see examples below).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>visreg</code> or <code>visregList</code> object (which is simply a list
of <code>visreg</code> objects).  A <code>visreg</code> object has three components:</p>
<dl><dt>fit</dt>
<dd><p>A data frame with <code>nn</code> rows containing the fit of the model
as <code>xvar</code> varies, along with lower and upper confidence bounds (named
<code>visregFit</code>, <code>visregLwr</code>, and <code>visregUpr</code>, respectively). The
fitted matrix of coefficients.</p></dd>
 <dt>res</dt>
<dd><p>A data frame with <code>n</code> rows,
where <code>n</code> is the number of observations in the original data set used
to model.  This frame contains information about the residuals, named
<code>visregReg</code> and <code>visregPos</code>; the latter records whether the
residual was positive or negative.</p></dd>
 <dt>meta</dt>
<dd><p>Contains meta-information
needed to construct plots, such as the name of the x and y variables,
whether there were any <code>by</code> variables, etc.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <code><a href="plot.visreg.html">plot.visreg</a></code> for plotting options, such as changing the
appearance of points, lines, confidence bands, etc.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p><a href="https://pbreheny.github.io/visreg" class="external-link">https://pbreheny.github.io/visreg</a></p></li>
<li><p>Breheny, P. and Burchett, W. (2017), Visualizing regression models using
visreg.
<a href="https://journal.r-project.org/archive/2017/RJ-2017-046/index.html" class="external-link">https://journal.r-project.org/archive/2017/RJ-2017-046/index.html</a></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://pbreheny.github.io/visreg" class="external-link">https://pbreheny.github.io/visreg</a> <code><a href="plot.visreg.html">plot.visreg</a></code>
<code><a href="visreg2d.html">visreg2d</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Patrick Breheny and Woodrow Burchett</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">###################</span></span></span>
<span class="r-in"><span><span class="co">## Linear models ##</span></span></span>
<span class="r-in"><span><span class="co">###################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Basic</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">Solar.R</span> <span class="op">+</span> <span class="va">Wind</span> <span class="op">+</span> <span class="va">Temp</span>, data<span class="op">=</span><span class="va">airquality</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-1.png" alt="" width="480" height="480"></span>
<span class="r-plt img"><img src="visreg-2.png" alt="" width="480" height="480"></span>
<span class="r-plt img"><img src="visreg-3.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"Wind"</span>, type<span class="op">=</span><span class="st">"contrast"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-4.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"Wind"</span>, type<span class="op">=</span><span class="st">"conditional"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-5.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Factors</span></span></span>
<span class="r-in"><span><span class="va">airquality</span><span class="op">$</span><span class="va">Heat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">$</span><span class="va">Temp</span>, <span class="fl">3</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cool"</span>,<span class="st">"Mild"</span>,<span class="st">"Hot"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit.heat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">Solar.R</span> <span class="op">+</span> <span class="va">Wind</span> <span class="op">+</span> <span class="va">Heat</span>, data<span class="op">=</span><span class="va">airquality</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.heat</span>, <span class="st">"Heat"</span>, type<span class="op">=</span><span class="st">"contrast"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-6.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.heat</span>, <span class="st">"Heat"</span>, type<span class="op">=</span><span class="st">"conditional"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-7.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Transformations</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">Solar.R</span> <span class="op">+</span> <span class="va">Wind</span> <span class="op">+</span> <span class="va">Temp</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">Wind</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>, data<span class="op">=</span><span class="va">airquality</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">Ozone</span><span class="op">)</span> <span class="op">~</span> <span class="va">Solar.R</span> <span class="op">+</span> <span class="va">Wind</span> <span class="op">+</span> <span class="va">Temp</span>, data<span class="op">=</span><span class="va">airquality</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">Ozone</span><span class="op">)</span> <span class="op">~</span> <span class="va">Solar.R</span> <span class="op">+</span> <span class="va">Wind</span> <span class="op">+</span> <span class="va">Temp</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">Wind</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>, data<span class="op">=</span><span class="va">airquality</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit1</span>, <span class="st">"Wind"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-8.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit2</span>, <span class="st">"Wind"</span>, trans<span class="op">=</span><span class="va">exp</span>, ylab<span class="op">=</span><span class="st">"Ozone"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-9.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit3</span>, <span class="st">"Wind"</span>, trans<span class="op">=</span><span class="va">exp</span>, ylab<span class="op">=</span><span class="st">"Ozone"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-10.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Conditioning</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"Wind"</span>, cond<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Temp<span class="op">=</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-11.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"Wind"</span>, print.cond<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Conditions used in construction of plot</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Solar.R: 207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Temp: 79</span>
<span class="r-plt img"><img src="visreg-12.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"Wind"</span>, cond<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Temp<span class="op">=</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-13.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Interactions</span></span></span>
<span class="r-in"><span><span class="va">fit.in1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Ozone</span><span class="op">~</span> <span class="va">Solar.R</span> <span class="op">+</span> <span class="va">Wind</span><span class="op">*</span><span class="va">Heat</span>, data<span class="op">=</span><span class="va">airquality</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.in1</span>, <span class="st">"Wind"</span>, by<span class="op">=</span><span class="st">"Heat"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-14.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.in1</span>, <span class="st">"Heat"</span>, by<span class="op">=</span><span class="st">"Wind"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-15.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.in1</span>, <span class="st">"Wind"</span>, by<span class="op">=</span><span class="st">"Heat"</span>, type<span class="op">=</span><span class="st">"contrast"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-16.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.in1</span>, <span class="st">"Heat"</span>, by<span class="op">=</span><span class="st">"Wind"</span>, breaks<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-17.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.in1</span>, <span class="st">"Heat"</span>, by<span class="op">=</span><span class="st">"Wind"</span>, breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-18.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Overlay</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit.in1</span>, <span class="st">"Wind"</span>, by<span class="op">=</span><span class="st">"Heat"</span>, overlay<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-19.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">######################</span></span></span>
<span class="r-in"><span><span class="co">## Nonlinear models ##</span></span></span>
<span class="r-in"><span><span class="co">######################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Logistic regression</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"birthwt"</span>, package<span class="op">=</span><span class="st">"MASS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">birthwt</span><span class="op">$</span><span class="va">race</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">birthwt</span><span class="op">$</span><span class="va">race</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"White"</span>,<span class="st">"Black"</span>,<span class="st">"Other"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">birthwt</span><span class="op">$</span><span class="va">smoke</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">birthwt</span><span class="op">$</span><span class="va">smoke</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Nonsmoker"</span>,<span class="st">"Smoker"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">low</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">race</span><span class="op">+</span><span class="va">smoke</span><span class="op">+</span><span class="va">lwt</span>, data<span class="op">=</span><span class="va">birthwt</span>, family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"lwt"</span>,</span></span>
<span class="r-in"><span>       xlab<span class="op">=</span><span class="st">"Mother's Weight"</span>, ylab<span class="op">=</span><span class="st">"Log odds (low birthweight)"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-20.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"lwt"</span>, scale<span class="op">=</span><span class="st">"response"</span>, partial<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>       xlab<span class="op">=</span><span class="st">"Mother's Weight"</span>, ylab<span class="op">=</span><span class="st">"P(low birthweight)"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-21.png" alt="" width="480" height="480"></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"lwt"</span>, scale<span class="op">=</span><span class="st">"response"</span>, partial<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>       xlab<span class="op">=</span><span class="st">"Mother's Weight"</span>, ylab<span class="op">=</span><span class="st">"P(low birthweight)"</span>, rug<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Proportional hazards</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: survival</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ovarian</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>data set ‘ovarian’ not found</span>
<span class="r-in"><span><span class="va">ovarian</span><span class="op">$</span><span class="va">rx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">ovarian</span><span class="op">$</span><span class="va">rx</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">futime</span>, <span class="va">fustat</span><span class="op">)</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">rx</span>, data<span class="op">=</span><span class="va">ovarian</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"age"</span>, ylab<span class="op">=</span><span class="st">"log(Hazard ratio)"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="visreg-22.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Robust regression</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">MASS</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: MASS</span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/MASS/man/rlm.html" class="external-link">rlm</a></span><span class="op">(</span><span class="va">Ozone</span> <span class="op">~</span> <span class="va">Solar.R</span> <span class="op">+</span> <span class="va">Wind</span><span class="op">*</span><span class="va">Heat</span>, data<span class="op">=</span><span class="va">airquality</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"Wind"</span>, cond<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Heat<span class="op">=</span><span class="st">"Mild"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>  Note that you are attempting to plot a 'main effect' in a model that contains an</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   interaction.  This is potentially misleading; you may wish to consider using the 'by'</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   argument.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Conditions used in construction of plot</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Solar.R: 207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Heat: Mild</span>
<span class="r-plt img"><img src="visreg-23.png" alt="" width="480" height="480"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## And more...; anything with a 'predict' method should work</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Return raw components of plot</span></span></span>
<span class="r-in"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu">visreg</span><span class="op">(</span><span class="va">fit</span>, <span class="st">"Wind"</span>, cond<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Heat<span class="op">=</span><span class="st">"Mild"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>  Note that you are attempting to plot a 'main effect' in a model that contains an</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   interaction.  This is potentially misleading; you may wish to consider using the 'by'</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   argument.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Conditions used in construction of plot</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Solar.R: 207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Heat: Mild</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://myweb.uiowa.edu/pbreheny/" class="external-link">Patrick Breheny</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Last updated 2025-02-27</p>
</div>

    </footer></div>





  </body></html>

